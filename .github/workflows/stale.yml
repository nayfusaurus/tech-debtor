name: Close Stale Issues and PRs

on:
  schedule:
    - cron: '0 0 * * *'  # Run daily at midnight UTC
  workflow_dispatch:  # Allow manual trigger

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v9
        with:
          # Issue configuration
          stale-issue-message: |
            This issue has been automatically marked as stale because it has not had
            recent activity. It will be closed in 14 days if no further activity occurs.

            If this issue is still relevant, please comment to keep it open.

            Thank you for your contributions! üôè

          close-issue-message: |
            This issue was automatically closed due to inactivity.

            If you believe this is still relevant, please reopen or create a new issue
            with updated information.

            Thank you for your understanding! üôè

          days-before-stale: 60
          days-before-close: 14
          stale-issue-label: 'stale'
          exempt-issue-labels: 'pinned,help-wanted,good-first-issue,bug,security'

          # Pull Request configuration
          stale-pr-message: |
            This PR has been automatically marked as stale because it has not had
            recent activity. It will be closed in 7 days if no further activity occurs.

            If you are still working on this, please comment or push new commits.

            Thank you for your contributions! üôè

          close-pr-message: |
            This PR was automatically closed due to inactivity.

            If you'd like to continue this work, please reopen the PR or create a new one.

            Thank you for your understanding! üôè

          days-before-pr-stale: 30
          days-before-pr-close: 7
          stale-pr-label: 'stale'
          exempt-pr-labels: 'pinned,security,work-in-progress,blocked'

          # General configuration
          operations-per-run: 100
          remove-stale-when-updated: true
          exempt-all-milestones: true
